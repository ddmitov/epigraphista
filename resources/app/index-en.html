<!DOCTYPE html>
<html lang="bg">

	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta charset="utf-8">

		<title>Epigraphista</title>

		<script>
		// Electron compatible code:
		if (navigator.userAgent.match(/Electron/)) {
			if (typeof module === 'object') {
				window.module = module;
				module = undefined;
			}
		}
		</script>

		<script type="text/javascript" src="jquery/jquery-1.11.1.min.js" charset="utf-8"></script>
		<script type="text/javascript" src="jquery/jquery-textarea-auto-resize.js" charset="utf-8"></script>
		<script type="text/javascript" src="jquery/jquery.selection.js" charset="utf-8"></script>

		<link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.css" media="all"/>
		<script type="text/javascript" src="bootstrap/js/bootstrap.min.js" charset="utf-8"></script>

		<script type="text/javascript" src="alertify/lib/alertify.min.js" charset="utf-8"></script>
		<link rel="stylesheet" type="text/css" href="alertify/themes/alertify.core.css" media="all"/>
		<link rel="stylesheet" type="text/css" href="alertify/themes/alertify.default.css" media="all"/>

		<script type="text/javascript" src="typegreek/typegreek.js" charset="utf-8"></script>

		<link rel="stylesheet" type="text/css" href="epigraphista/epigraphista.css" media="all"/>
		<script type="text/javascript" src="epigraphista/translations/english.js" charset="utf-8"></script>
		<script type="text/javascript" src="epigraphista/epigraphista-greek-support.js" charset="utf-8"></script>
		<script type="text/javascript" src="epigraphista/epigraphista-gui-initialization.js" charset="utf-8"></script>
		<script type="text/javascript" src="epigraphista/epigraphista-perl-support.js" charset="utf-8"></script>
		<script type="text/javascript" src="epigraphista/epigraphista-text-converter.js" charset="utf-8"></script>
		<script type="text/javascript" src="epigraphista/epigraphista-ui-elements.js" charset="utf-8"></script>
		<script type="text/javascript" src="epigraphista/epigraphista-ui-functions.js" charset="utf-8"></script>

		<script>
			// Necessary to avoid conflicts between jQuery and other JavaScript libraries:
			var $jQuery = jQuery.noConflict();

			// PEB compatible code:
			if (navigator.userAgent.match(/Perl Executing Browser/)) {
				$jQuery.getScript("peb/peb.js");
			}

			// Electron compatible code:
			if (navigator.userAgent.match(/Electron/)) {
				if (window.module) {
					module = window.module;
				}

				var electronScript = document.createElement('script');
				electronScript.type='text/javascript';
				electronScript.src = 'electron-nwjs/electron.js';
				electronScript.charset = 'utf-8';
				document.getElementsByTagName('head')[0].appendChild(electronScript);

				electronScript.onload= function () {
					electronContextMenu();

					//~ // Wait for close event message from the main process and react accordingly:
					require('electron').ipcRenderer.on('checkUserInputBeforeClose', function() {
						electronCheckUserInputBeforeClose();
					});
				}

				var camelHarnessScript = document.createElement('script');
				camelHarnessScript.type='text/javascript';
				camelHarnessScript.src = 'electron-nwjs/camel-harness.js';
				camelHarnessScript.charset = 'utf-8';
				document.getElementsByTagName('head')[0].appendChild(camelHarnessScript);

			}

			// NW.js compatible code:
			if (typeof(nw) !== 'undefined') {
				var win = nw.Window.get();
				win.maximize();

				$jQuery.getScript("electron-nwjs/nw.js");
				$jQuery.getScript("electron-nwjs/camel-harness.js");
			}
		</script>
	</head>

	<body>
		<div class="container-fluid" id="container">

		<br>

			<form id="epigraphista-form" name="epigraphista_form">

				<div class="row section-title">
					Inscription description
				</div>

				<div class="row buttons-row">
					<input type="button" id="repository-button" value="Repository"
						onClick="javascript:addTextAreaElement('repository', 'Repository', 'full', null, null);" class="btn btn-info btn-xs">

					<input type="button" id="idno-button" value="ID number"
						onClick="javascript:addTextAreaElement('idno', 'ID number', 'full', null, null);" class="btn btn-info btn-xs">

					<input type="button" id="support-button" value="Monument description"
						onClick="javascript:addSupportGroup();" class="btn btn-info btn-xs">

					<input type="button" id="layout-button" value="Layout description"
						onClick="javascript:addTextAreaElement('layout', 'Layout description', 'full', 'greek', 'additional-keyboard');" class="btn btn-info btn-xs">

					<input type="button" id="hand-note-button" value="Hand note"
						onClick="javascript:addTextAreaElement('hand-note', 'Hand note', 'full', 'greek', 'additional-keyboard');" class="btn btn-info btn-xs">

					<input type="button" id="orig-place-button" value="Place of origin"
						onClick="javascript:addTextAreaElement('orig-place', 'Place of origin', 'full', null, 'additional-keyboard');" class="btn btn-info btn-xs">

					<input type="button" id="orig-date-button" value="Date of origin"
						onClick="javascript:addTextAreaElement('orig-date', 'Date of origin', 'full', 'greek', 'additional-keyboard');" class="btn btn-info btn-xs">

					<input type="button" id="provenance-found-button" value="Context"
						onClick="javascript:addTextAreaElement('provenance-found', 'Context', 'full', 'greek', 'additional-keyboard');" class="btn btn-info btn-xs">

					<input type='button' id="provenance-observed-button" value="Provenance observed"
						onClick="addTextAreaElement('provenance-observed', 'Provenance observed', 'full', 'greek', 'additional-keyboard');" class='btn btn-info btn-xs'>
				</div>

				<div class="row">
					<div id="title-group" class="form-group col-xs-12">
						<div class="input-prepend">
							<textarea rows="1" id="title" name="title" class="form-control input-text" spellcheck="false" placeholder="Title" title="Title" ></textarea>
						</div>
					</div>
				</div>

				<div id="repository-group">
				</div>

				<div id="idno-group">
				</div>

				<div id="support-group">
				</div>

				<div id="layout-group">
				</div>

				<div id="hand-note-group">
				</div>

				<div id="orig-place-group">
				</div>

				<div id="orig-date-group">
				</div>

				<div id="provenance-found-group">
				</div>

				<div id="provenance-observed-group">
				</div>

				<div class="row section-title">
					Inscription text
				</div>

				<div class="row buttons-row">
					<input type="button" id="apparatus-criticus-button" value="Apparatus criticus"
						onClick="javascript:addTextAreaElement('apparatus-criticus', 'Apparatus criticus', 'full', 'greek', 'additional-keyboard');" class="btn btn-info btn-xs">

					<input type="button" id="translation-button" value="Translation"
						onClick="javascript:addTextAreaElement('translation', 'Translation', 'full', 'greek', 'additional-keyboard');" class="btn btn-info btn-xs">

					<input type="button" id="commentary-button" value="Commentary"
						onClick="javascript:addTextAreaElement('commentary', 'Commentary', 'full', 'greek', 'additional-keyboard');" class="btn btn-info btn-xs">

					<input type="button" id="bibliography-button" value="Bibliography"
						onClick="javascript:addTextAreaElement('bibliography', 'Bibliography', 'full', 'greek', 'additional-keyboard');" class="btn btn-info btn-xs">
				</div>

				<div id="inscription-group">
					<div id="inscription-greek-keyboard-help" class="greek greek-help"></div>
					<div id="inscription-additional-keyboard"></div>
					<div class="row">
						<div id="inscription-input-group" class="form-group col-xs-12">
							<div class="input-group">
								<textarea id="inscription" class="form-control greek input-text" spellcheck="false"
									title="Inscription text" placeholder="Inscription text"
									onkeypress="javascript:return convertCharToggle(this, document.epigraphista_form.inscription_switch_greek.checked, event);"
									onkeyup="javascript:return convertStr(this, event);"
									oninput="javascript:convertEpigraphicText('inscription');"></textarea>
								<span class="input-group-addon btn btn-info"
									onclick="javascript:convertEpigraphicText('inscription');" title="Convert inscription text to Epidoc XML fragment">
									<b>XML</b>
								</span>
								<span class="input-group-addon">
									<input type="checkbox" id="inscription-switch-greek" name="inscription_switch_greek"
										title="Greek polythonic text input"/>&nbsp;
									<a href="javascript:toggleGreekKeyboardHelp('inscription');"
										title="Greek polythonic text input help">Ἐλληνική</a>
								</span>
								<span class="input-group-addon btn btn-info"
									onclick="javascript:toggleAdditionalKeyboard('inscription-additional-keyboard', 'inscription');" title="Additional keyboard">
									<span class="glyphicon glyphicon-font"></span>
								</span>
							</div>
						</div>
					</div>

				<div id="inscription-formatted">
						<div class="row">
							<div class="form-group col-xs-12">
<pre id="inscription-html" title="Inscription text as Epidoc XML fragment" class="greek input-text xml">
<font color='#000080'>&lt;ab&gt;</font>
&nbsp;&nbsp;&nbsp;&nbsp;<font color='#000080'>&lt;lb <font color='#008080'>n=</font><font color='7F007F'>&quot;1&quot;</font>/&gt;</font>
<font color='#000080'>&lt;/ab&gt;</font>
</pre>
							</div>
						</div>
						<input type="hidden" id="inscription-xml" name="inscription_xml" value="">
					</div>
				</div>

				<div id="apparatus-criticus-group"></div>

				<div id="translation-group"></div>

				<div id="commentary-group"></div>

				<div id="bibliography-group"></div>

				<div class="row buttons-row">
					<input type="button" value="Save" onClick="javascript:finalCheckAndSubmit();" class="btn btn-primary">
				</div>
			</form>

		</div>

		<script type="text/javascript">
			var originalContainerContents;

			$jQuery(document).ready(function() {
				detectTouchScreen();
				guiInitialization();
				originalContainerContents = document.getElementsByClassName("container-fluid")[0].innerHTML;
			});
		</script>

	</body>

</html>
